{% extends 'base.html' %}
{% block title %}–°–ø—ñ–ª—å–Ω–æ—Ç–∞ ‚Äî DesignStudio{% endblock %}

{% block extra_css %}
<style>
    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–æ–∑–¥—ñ–ª—É */
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .page-header h2 {
        margin: 0;
        font-size: 2rem;
        background: linear-gradient(90deg, #fff, #81ecec);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* –ö–Ω–æ–ø–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è */
    .create-btn {
        background: rgba(129, 236, 236, 0.2);
        color: #81ecec;
        border: 1px solid rgba(129, 236, 236, 0.4);
        padding: 12px 25px;
        border-radius: 12px;
        text-decoration: none;
        font-weight: 600;
        transition: 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .create-btn:hover {
        background: rgba(129, 236, 236, 0.4);
        color: #fff;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(129, 236, 236, 0.2);
    }

    /* –ö–∞—Ä—Ç–∫–∏ –ø–æ—Å—Ç—ñ–≤ */
    .posts-grid {
        display: grid;
        gap: 20px;
    }

    .post-card {
        padding: 25px;
        transition: all 0.3s ease;
        text-decoration: none;
        color: inherit;
        position: relative;
        overflow: hidden;
    }

    .post-card:hover {
        background: rgba(255, 255, 255, 0.18);
        transform: translateY(-4px);
        border-color: rgba(255, 255, 255, 0.4);
    }

    .post-meta {
        font-size: 0.85rem;
        color: #b2bec3;
        margin-bottom: 12px;
        display: flex;
        justify-content: space-between;
    }

    .post-title {
        font-size: 1.4rem;
        margin: 0 0 10px 0;
        color: #ffeaa7; /* –ê–∫—Ü–µ–Ω—Ç–Ω–∏–π –∂–æ–≤—Ç–∏–π –∑ base.css */
        font-weight: 600;
    }

    .post-excerpt {
        font-size: 1rem;
        line-height: 1.5;
        color: #dfe6e9;
        margin-bottom: 20px;
    }

    /* –§—É—Ç–µ—Ä –∫–∞—Ä—Ç–∫–∏ (—Ç–µ–≥–∏ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞) */
    .card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: auto;
    }

    .tags-container {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }

    .tag {
        background: rgba(255, 255, 255, 0.1);
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        color: #81ecec;
        border: 1px solid rgba(129, 236, 236, 0.2);
    }

    .stats {
        display: flex;
        gap: 15px;
        font-size: 0.9rem;
        color: #b2bec3;
    }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h2>–°–ø—ñ–ª—å–Ω–æ—Ç–∞ –¥–∏–∑–∞–π–Ω–µ—Ä—ñ–≤</h2>
        <p style="margin: 5px 0 0 0; opacity: 0.7;">–û–±–º—ñ–Ω—é–π—Ç–µ—Å—è —ñ–¥–µ—è–º–∏ —Ç–∞ –æ—Ç—Ä–∏–º—É–π—Ç–µ —Ñ—ñ–¥–±–µ–∫</p>
    </div>
    <a href="{% url 'community:create' %}" class="create-btn">
        <span>+</span> –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ–º—É
    </a>
</div>

<div class="posts-grid">
    {% for post in posts %}
    <a href="{% url 'community:detail' pk=post.pk %}" class="glass post-card">
        <div class="post-meta">
            <span>üë§ {{ post.author.username }}</span>
            <span>üïí {{ post.created_at|date:"d.m.Y" }}</span>
        </div>

        <h3 class="post-title">{{ post.title }}</h3>
        <p class="post-excerpt">{{ post.content|striptags|truncatewords:25 }}</p>

        <div class="card-footer">
            <div class="tags-container">
                {% if post.tags %}
                    {% for tag in post.tags.split %}
                        <span class="tag">#{{ tag }}</span>
                    {% endfor %}
                {% endif %}
            </div>
            <div class="stats">
                <span>‚ù§Ô∏è {{ post.total_likes }}</span>
                <span>üí¨ {{ post.comments.count }}</span>
            </div>
        </div>
    </a>
    {% empty %}
    <div class="glass" style="text-align: center; padding: 60px;">
        <h3>–¢—É—Ç –ø–æ–∫–∏ —â–æ —Ç–∏—Ö–æ...</h3>
        <p style="opacity: 0.7;">–°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä—à–∏–º, —Ö—Ç–æ —Ä–æ–∑–ø–æ—á–Ω–µ –¥–∏—Å–∫—É—Å—ñ—é!</p>
        <br>
        <a href="{% url 'community:create' %}" class="create-btn">–†–æ–∑–ø–æ—á–∞—Ç–∏ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è</a>
    </div>
    {% endfor %}
</div>
{% endblock %}